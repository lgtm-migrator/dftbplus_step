<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe 1 extended: More flexible, useful workflows &mdash; DFTB+ Step 2022.10.20 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PQXXTJ2');</script>
<!-- End Google Tag Manager -->

  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>

    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Recipe 2: Band structure, DOS and PDOS in SEAMM" href="recipe_2.html" />
    <link rel="prev" title="Recipe 1: First Calculation with DFTB+ in SEAMM" href="recipe_1.html" /> 
</head>

<body class="wy-body-for-nav">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PQXXTJ2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
 

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> DFTB+ Step
          </a>
              <div class="version">
                2022.10.20
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">DFTB+ Recipes</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="recipe_1.html">Recipe 1: First Calculation with DFTB+ in SEAMM</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Recipe 1 extended: More flexible, useful workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="recipe_2.html">Recipe 2: Band structure, DOS and PDOS in SEAMM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../history.html">History</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dftbplus.org/documentation">DFTB+ documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://molssi-seamm.github.io">Main SEAMM documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DFTB+ Step</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">User Documentation</a> &raquo;</li>
          <li><a href="index.html">DFTB+ Recipes</a> &raquo;</li>
      <li>Recipe 1 extended: More flexible, useful workflows</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user/recipes/recipe_1_extended.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="recipe-1-extended-more-flexible-useful-workflows">
<h1>Recipe 1 extended: More flexible, useful workflows<a class="headerlink" href="#recipe-1-extended-more-flexible-useful-workflows" title="Permalink to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>Recipe 1 is a great introduction to running DFTB+. If you read the <a class="reference external" href="https://dftbplus-recipes.readthedocs.io/en/latest/basics/firstcalc.html">recipe on the DFTB+
website</a>, it
is quite long and detailed because it is introducing the input to DFTB+ as well as the
manually creating the structure. By contrast, setting up the same calculation in SEAMM,
<a class="reference internal" href="recipe_1.html"><span class="doc">example</span></a> is trivial – use SMILES to create the structure and a very
simple DFTB+ flowchart to optimize the structure. The only thing we had to change from
the defaults was the parameter set to use. Most of the tutorial was about understanding
the output in the Dashboard, <cite>job.out</cite> in particular.</p>
<p>Hard-wiring the molecule in the <strong>from SMILES step</strong> works, but is a bit
cumbersome. Sure, you can edit the flowchart every time you want to run a different
molecule, but there should be a better way. There is! SEAMM supports input parameters
for flowcharts. The <strong>parameters step</strong> handles this. You could edit the exisiting
flowchart to add this, but let’s try something new. Let’s get the flowchart from Zenodo.</p>
<p>If you are not familiar with <a class="reference external" href="https://zenodo.org">Zenodo</a> you might want to head over
there and look around. Zenod is a fantastic resource for storing and sharing data,
documents, release of code, etc. getting a DOI in the process. DOI’s are used for
archival storage. Once a DOI is minted for the data, the data can no longer be changed,
though new versions, with new DOI’s can be stored. You can also go directly to the
flowchart that we are interest in at <a class="reference external" href="https://doi.org/10.5281/zenodo.7013212">https://doi.org/10.5281/zenodo.7013212</a> Zenodo also
supports communities, and there is one for <a class="reference external" href="https://zenodo.org/communities/seamm-flowcharts">SEAMM flowcharts</a> where you can search and browse
available flowcharts. As you become more familiar with SEAMM you should consider
uploading useful flowcharts to Zenodo and submitting them to the community. You can
upload directly from SEAMM!</p>
</section>
<section id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this heading"></a></h2>
<p>You can also open a flowchart from Zenodo directly in SEAMM. Start SEAMM and either
select <strong>File/Open</strong> or use the shortcut <strong>ctrl-O</strong> (<strong>cmd-O</strong> on a Mac). When the
dialog appears, change the <strong>From</strong> filed from <em>local files</em> to <em>Zenodo</em>. The <strong>Show
flowcharts where</strong> section, click the <strong>+</strong> button and fill out the line to read “must
have any field contains SMILES” and click the <strong>Search</strong> button:</p>
<figure class="align-center" id="id1">
<img alt="Opening a flowchart from Zenodo" src="../../_images/recipe_1_extended_zenodo.png" />
<figcaption>
<p><span class="caption-text">Opening a flowchart from Zenodo</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>We want the flowchart “DFTB+ optimization from SMILES, using 3ob parameter set”, so
select it. The description of the flowchart will appear in the <strong>Details</strong> area – this
is how you can browse the flowcharts to find one that you want. Click <strong>Open</strong> to open
the selected flowchart:</p>
<figure class="align-center" id="id2">
<img alt="Flowchart with **Parameters** dialog open" src="../../_images/recipe_1_extended_parameters.png" />
<figcaption>
<p><span class="caption-text">Flowchart with <strong>Parameters</strong> dialog open</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>You can click the <strong>Edit</strong> button next to the SMILE parameter to see how the parameters
are setup. Just click <strong>Cancel</strong> to exit the dialog so that you don’t accidentally make
any changes. This defines a parameters <em>SMILES</em> that we set when we submit the job. This
allows you to run different molecules easily. There is one more change from the original
flowchart, in the <strong>from SMILES step</strong>:</p>
<figure class="align-center" id="id3">
<img alt="Editing the **from SMILES step**" src="../../_images/recipe_1_extended_from_smiles.png" />
<figcaption>
<p><span class="caption-text">Editing the <strong>from SMILES step</strong></span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Note that rather the have the SMILES string in the first field, we use the parameter
prefixed by a dollar sign to indicate that it is a variable, not a string.</p>
<p>That’s it! Now submit the job (<strong>File/Run</strong> or <strong>ctrl-R</strong>):</p>
<figure class="align-center" id="id4">
<img alt="Submitting the job with a parameter" src="../../_images/recipe_1_extended_submit.png" />
<figcaption>
<p><span class="caption-text">Submitting a job with a parameter</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Once the job finishes, you can look at the structure and outputs. Note that, unless you
changed the flowchart, it is using the newer <strong>3ob</strong> parameter set, so if you run water
again you will get similar but slightly different results. Note that for toluene the
calculated <span class="math notranslate nohighlight">\(ΔE_f = 40\)</span> kJ/mol. The <a class="reference external" href="https://webbook.nist.gov/cgi/cbook.cgi?ID=C108883&amp;Units=SI&amp;Mask=1#Thermo-Gas">experimental</a>
<span class="math notranslate nohighlight">\(ΔH_f ≈ 50 ± 1\)</span>, so reasonable agreement.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading"></a></h2>
<p>In this tutorial you have seen how to make a general, useful flowchart. SMILES is an
excellent way to construct small organic molecules, and it is easy to find the SMILES
for many molecules by searching on the Internet or looking in databases such as <a class="reference external" href="https://pubchem.ncbi.nlm.nih.gov">PubChem</a>. The SMILES “language” is also quite easy to
learn. With a little practice you can easily generate most small molecules. Later in
these tutorials you will see a similar approach based on structure files, which is a bit
more general and also works for crystalline systems, where there is no equivalent of
SMILES.</p>
<p>You should also be aware of the limitations of this approach. The principal issue is the
optimized structure is a local minimum, not necessarily the global minimum, which is
usual what you are interested in. This is not an issue with small molecules, but as the
system size increases, and particularly for “floppy” molecules with many rotatable
bonds, finding the global minimum is quite difficult. And in some senses the concept of
a structure – a minimum on the potential energy surface – is not very useful. Flexible
molecules change their conformation rapidly and are better thought of as having an
ensemble of structures.</p>
<p>There are many tools for locating global minima and for sampling ensembles of
molecules. These are not yet available as plug-ins in SEAMM, but hopefully will be
soon.</p>
<p>Of course, the other limitation is the approximations inherent in DFTB+ and the
parameterizations used. You should read about the science underpinning <a class="reference external" href="https://dftbplus.org/about-dftb">DFTB+</a>, and the descriptions of the parameterizations at
the <a class="reference external" href="https://dftb.org/parameters/download">DFTB website</a> and references therein.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="recipe_1.html" class="btn btn-neutral float-left" title="Recipe 1: First Calculation with DFTB+ in SEAMM" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="recipe_2.html" class="btn btn-neutral float-right" title="Recipe 2: Band structure, DOS and PDOS in SEAMM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  

<p>
<div class="row">
  <div class="column_left">
    <a href="https://molssi.org/" target="_blank" title="Go to MolSSI in a new tab">
      <img src="/_images/MolSSI.jpg" alt="The MolSSI" style="border:0;">
    </a>
  </div>
  <div class="column">
    &copy; Copyright 2019-2021, the Molecular Sciences Software Institute,
    which receives funding from the National Science Foundation under awards OAC-1547580
    and CHE-2136142.
  </div>
  <div class="column_right">
    <a href="https://nsf.gov/" target="_blank" title="Go to the NSF in a new tab">
      <img src="/_images/NSF_4-Color_bitmap_Logo.png" alt="The NSF" style="border:0;">
    </a>
  </div>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>